const db=firebase.firestore(),uid=localStorage.getItem("Uid");var nomeSession;try{class a{constructor(a){this.curso=a}cadastrar(){document.querySelector("div[class='container-loader']").style.display="none",db.collection("cursos").add({curso:this.curso}).then(()=>{const a=new Date,b=(a.getDate()+"").padStart(2,"0"),c=(a.getMonth()+1+"").padStart(2,"0"),d=a.getFullYear()+"";var e=a.getHours()+"";0==e&&(e=a.getHours()+""+"0");var f=a.getMinutes()+"";f=10>f?(a.getMinutes()+"").padStart(2,"0"):a.getMinutes()+"";const g=`${b}/${c}/${d} as ${e}:${f}`;db.collection("historico").add({usuarioUID:uid,alteracao:`O usuario ${nomeSession} cadastrou o curso "${this.curso}" no dia ${g}`,data_hora:g}).then(()=>{alert("curso cadastrado")}).catch(a=>{alert(a.message)})}).catch(a=>{alert(a.message)})}}document.querySelector("button").addEventListener("click",function(){document.querySelector("div[class='container-loader']").style.display="block";const b=new FormData(document.querySelector("form")),c=b.get("curso").trim();0==c.length?alert("Preencha todos os campos"):db.collection("cursos").where("curso","==",c).get().then(b=>{if(0<b.docs.length)alert("Perfil existente");else{document.querySelector("div[class='container-loader']").style.display="block";var d=new a(c);d.cadastrar()}}).catch(a=>{alert(a.message)})})}catch(a){alert("Erro "+a)}